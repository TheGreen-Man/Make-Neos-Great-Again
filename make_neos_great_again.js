// for security reasons i am unable to show the full text, and it has been replaced by mock text.
// please check in POSLOG -> SCO -> R6LitePlus -> Model to see the mock text

const POSLOG = [
	{
		registerType: "POS",
		closerLook: [
			{
				Equipment: "S745",
				dispatchProduct: "SUREPOS 700 SERIES",
				dispatchModel: "4900-745",
				Model: [],
			},
		],
	},
	{
		registerType: "SCO",
		closerLook: [
			{
				Equipment: "R5",
				dispatchProduct: "FASTLANE 7350",
				dispatchModel: "NCR-7350",
				Model: [],
			},
			{
				Equipment: "R6Lite",
				dispatchProduct: "REALPOS",
				dispatchModel: "R6 Lite",
				Model: [],
			},
			{
				Equipment: "R6LitePlus",
				dispatchProduct: "REALPOS",
				dispatchModel: "R6 Lite Plus",
				Model: [
					{
						exactPart: "CoinRecycler",
						issueDetails: [
							{
								issue: "Lorem0",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem1",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem2",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem3",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem4",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem5",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem6",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem7",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem8",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem9",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem10",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem11",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem12",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem13",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem14",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem15",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem16",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem17",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs: [
									//zero log is empty because it is generated from information in ticket
									"",
									"Log number 1",
									"Log number 2",
								],
							},
							{
								issue: "Lorem18",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number using ReGeX
									"text-text -XX- some more text",
								logs:
									//there is just one log for this issue
									[""],
							},
						],
					},
					{
						exactPart: "GSR50",
						issueDetails: [
							{
								issue: "TopModule",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number dynamically
									"text - text -XX- some more text",
								logs: ["", "log number 1", "log number 2"],
							},
							{
								issue: "RecyclingModule",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number dynamically
									"text - text -XX- some more text",
								logs: ["", "log number 1"],
							},
							{
								issue: "CashBoxModule",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number dynamically
									"text - text -XX- some more text",
								logs: ["", "log number 1", "log number 2"],
							},
							{
								issue: "CommunicationError",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number dynamically
									"text - text -XX- some more text",
								logs: ["", "log number 1"],
							},
							{
								issue: "PhysicalDamage",
								kb: "issueID",
								summary:
									// the -XX- will be transformed into register number dynamically
									"text - text -XX- some more text",
								logs: [""],
							},
						],
					},
				],
			},
			{
				Equipment: "WebposR6L+",
				dispatchProduct: "REALPOS",
				dispatchModel: "R6 Lite Plus",
				Model: [],
			},
		],
	},
];

/////////////////////////////////////////////////////////////////

//These index variables are used when selecting the issue, for issue selection in POSLOG
let indexOne;
let indexTwo;
let indexThree;
let indexFour;

// if true, show dispatchProduct/dispatchModel
let x = true;

let counter;
let heroUl = document.createElement("ul");
heroUl.addEventListener("mouseenter", function () {
	heroUl.style.opacity = "1";
});
heroUl.addEventListener("mouseleave", function () {
	heroUl.style.opacity = "0.3";
});
heroUl.style.overflow = "hidden";
heroUl.style.transition = "opacity 1s";
//////////////////////////////
function link_element() {
	//in order of creating new dropdown on click, old one must be deleted
	heroUl.innerHTML = "";
	if (x) not_all_heroes_wear_capes();
	x = false;
	counter = 0;
	heroUl.className = "dropdown-menu navigation-bar__item-menu";
	heroUl.style.maxHeight = "400px";
	heroUl.style.overflowY = "auto";
	hero2.appendChild(heroUl);

	function swapper(e) {
		heroUl.innerHTML = "";

		function ultimateCreator(text) {
			counter++;
			// function singleEventListener(indexOne, indexTwo, indexThree){

			// }
			function helper(type) {
				window[type] = document.createElement("li");
				window[type].className =
					"navigation-bar__item-menu-list ng-scope";
				heroUl.appendChild(window[type]);

				window[type + "A"] = document.createElement("a");
				window[type + "A"].className =
					"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
				window[type].appendChild(window[type + "A"]);

				window[type + "text"] = document.createElement("span");
				window[type + "text"].className =
					"template-chooser-dropdown-item__title ng-binding";
				window[type + "text"].style.fontWeight = "700";
				window[type + "text"].innerText = type;
				window[type + "A"].appendChild(window[type + "text"]);
			}

			function setKb(kb) {
				let RESOURCES = document.querySelectorAll(
					"div.profile__support-panel>div>ul.nav.nav-tabs.nav-justified>li.ng-isolate-scope>a.ng-binding"
				);
				RESOURCES[1].click();
				let SEARCH = document.querySelector(
					"button.small-btn_secondary.ng-binding.ng-scope"
				);
				SEARCH.click();
				//dodati keydown simulation feature
				let SEARCHARTICLE = document.querySelector(
					"div.relative-position.search-resource__search-inputContainer>input.search-resource__search-input"
				);
				SEARCHARTICLE.value = kb + " ";

				var continuee = document.createElement("li");
				continuee.className = "navigation-bar__item-menu-list ng-scope";
				continuee.addEventListener("click", (e) => {
					BackBone(
						POSLOG[indexOne].closerLook[indexTwo].Model[indexThree]
							.issueDetails[indexFour].summary,
						POSLOG[indexOne].closerLook[indexTwo].dispatchProduct,
						POSLOG[indexOne].closerLook[indexTwo].dispatchModel,
						continuee
					);
				});
				heroUl.appendChild(continuee);

				var preFoo = document.createElement("a");
				preFoo.className =
					"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
				continuee.appendChild(preFoo);

				var foo = document.createElement("span");
				foo.className =
					"template-chooser-dropdown-item__title ng-binding";
				foo.style.fontWeight = "700";
				foo.innerText = "click after kb";
				preFoo.appendChild(foo);
			}

			function BackBone(summary, product, model, destory) {
				// console.log(summary + "  -  " + product + "  -  " + model);
				let RESOURCES = document.querySelectorAll(
					"div.profile__support-panel>div>ul.nav.nav-tabs.nav-justified>li.ng-isolate-scope>a.ng-binding"
				);
				RESOURCES[0].click();
				let MAINEDIT = document.querySelector(
					"div.editable-content-section__edit-button.ng-binding.ng-scope"
				);
				MAINEDIT.click();
				let TITLE = document.querySelector(
					"div.title-bar__section.col-md-12>div.ticket__basic-info>div>label>input"
				);
				// TITLE.click();
				let a = document.querySelectorAll(
					"div.custom-field.col-md-6.full-width"
				);
				let REGISTERNUMBER =
					a[4].children[0].children[0].children[0].children[1].children[0].title.slice(
						0,
						2
					);
				if (REGISTERNUMBER.includes("."))
					REGISTERNUMBER = "0" + REGISTERNUMBER.replace(".", "");

				let summaryCorrected = summary.replace("-XX-", REGISTERNUMBER);
				summaryCorrected = summaryCorrected + " ";
				TITLE.value = summaryCorrected;
				let DESCRIPTION = document.querySelector(
					"#edit-summary-content-text"
				);
				// DESCRIPTION.click();
				DESCRIPTION.value = summaryCorrected;
				let BROWSEPRODUCTCATEGORY = document.querySelectorAll(
					"div.category-widget__editor-links.clearfix.ng-scope>button.btn_link.ng-binding"
				);
				BROWSEPRODUCTCATEGORY[2].click();

				// let PRODUCT = document.querySelectorAll("div.category-widget__item.dropdown.ng-scope");
				// PRODUCT[2].children[2].click();

				// let ACTUALPRODUCT = document.querySelectorAll("ul.dropdown-menu.ng-scope");
				// ACTUALPRODUCT[1].children[0].children[1].value = product;
				destory.remove();
				var productName = document.createElement("li");
				productName.className =
					"navigation-bar__item-menu-list ng-scope";
				heroUl.appendChild(productName);

				var productNameContainer = document.createElement("input");
				productNameContainer.type = "text";
				productNameContainer.readOnly = true;
				// scoic.setAttribute('readonly', true)
				productNameContainer.style.position = "apsolute";
				// scoic.style.minWidth = "66%";
				// productNameContainer.style.display = "inline";
				productNameContainer.style.textAlign = "center";
				productNameContainer.value = product;
				productNameContainer.addEventListener("click", function () {
					this.select();
					document.execCommand("copy");
				});
				productName.appendChild(productNameContainer);

				var modelName = document.createElement("li");
				modelName.className = "navigation-bar__item-menu-list ng-scope";
				heroUl.appendChild(modelName);

				var modelNameContainer = document.createElement("input");
				modelNameContainer.type = "text";
				modelNameContainer.readOnly = true;
				// scoic.setAttribute('readonly', true)
				modelNameContainer.style.position = "apsolute";
				// scoic.style.minWidth = "66%";
				// modelNameContainer.style.display = "inline";
				modelNameContainer.style.textAlign = "center";
				modelNameContainer.value = model;
				modelNameContainer.addEventListener("click", function () {
					this.select();
					document.execCommand("copy");
				});
				productName.appendChild(modelNameContainer);

				var secondContinueButton = document.createElement("li");
				secondContinueButton.className =
					"navigation-bar__item-menu-list ng-scope";
				secondContinueButton.addEventListener("click", (e) => {
					Loginator3000(
						POSLOG[indexOne].closerLook[indexTwo].Model[indexThree]
							.issueDetails[indexFour],
						summaryCorrected,
						secondContinueButton
					);
				});
				heroUl.appendChild(secondContinueButton);

				var preFoo = document.createElement("a");
				preFoo.className =
					"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
				secondContinueButton.appendChild(preFoo);

				var foo = document.createElement("span");
				foo.className =
					"template-chooser-dropdown-item__title ng-binding";
				foo.style.fontWeight = "700";
				foo.innerText = "click after Product & Model";
				preFoo.appendChild(foo);
			}

			let keisha = 0;
			let logWrite, hesus, maria;
			function Loginator3000(issueDetails, firstLog, destroy) {
				//ne radi (onclick) sugavo sranje
				// let SAVE_BUTTON = document.querySelector(".editable-content-section__control-bar > button:nth-child(1)")
				function genericFunction() {
					destroy.remove();
					if (keisha < issueDetails.logs.length) {
						logWrite = document.createElement("li");
						logWrite.className =
							"navigation-bar__item-menu-list ng-scope";
						logWrite.addEventListener("click", (e) => {
							Loginator3000(
								POSLOG[indexOne].closerLook[indexTwo].Model[
									indexThree
								].issueDetails[indexFour],
								"",
								logWrite
							);
						});
						heroUl.appendChild(logWrite);

						hesus = document.createElement("a");
						hesus.className =
							"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
						logWrite.appendChild(hesus);

						maria = document.createElement("span");
						maria.className =
							"template-chooser-dropdown-item__title ng-binding";
						maria.style.fontWeight = "700";
						maria.innerText = "click me for logs" + keisha;
						hesus.appendChild(maria);
					} else {
						logWrite = document.createElement("li");
						logWrite.className =
							"navigation-bar__item-menu-list ng-scope";
						logWrite.addEventListener("click", (e) => {
							OBSERVED_DIV.click();
							LOG_FIELD.innerText =
								"SCORR - FE-TA Cait stated that the issue has been resolved";
							POST_BUTTON.removeAttribute("disabled");
							let MAINEDIT = document.querySelector(
								"div.editable-content-section__edit-button.ng-binding.ng-scope"
							);
							MAINEDIT.click();
							let STATUS = document.querySelector(
								".update-status__dropdown > label:nth-child(1) > div:nth-child(2) > button:nth-child(1)"
							);
							STATUS.click();
							let GLEDAJ_MENE = document.querySelector(
								".status-bar__section > div:nth-child(1)"
							);
							const observer = new MutationObserver(function () {
								let STATUS_REASON = document.querySelector(
									"button.ng-invalid-required"
								);
								if (STATUS_REASON) {
									STATUS_REASON.click();
									document
										.querySelector(
											".open > ul:nth-child(3) > li:nth-child(5) > a:nth-child(1)"
										)
										.click();
									let RESOLUTION_NOTE =
										document.querySelector(".textarea");
									RESOLUTION_NOTE.value =
										"FE-TA Cait stated that the issue has been resolved";
									// let SAVE_BUTTON = document.querySelector(".small-btn_primary");
									// SAVE_BUTTON.removeAttribute("disabled");
									// SAVE_BUTTON.click()
									observer.disconnect();
								}
							});
							observer.observe(GLEDAJ_MENE, {
								subtree: true,
								childList: true,
							});
							document
								.querySelector(
									"div.open:nth-child(2) > ul:nth-child(3) > li:nth-child(4) > a:nth-child(1)"
								)
								.click();
						});
						heroUl.appendChild(logWrite);

						hesus = document.createElement("a");
						hesus.className =
							"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
						logWrite.appendChild(hesus);

						maria = document.createElement("span");
						maria.className =
							"template-chooser-dropdown-item__title ng-binding";
						maria.style.fontWeight = "700";
						maria.innerText = "RR";
						hesus.appendChild(maria);

						let llogWrite = document.createElement("li");
						llogWrite.className =
							"navigation-bar__item-menu-list ng-scope";
						llogWrite.addEventListener("click", (e) => {
							let prezime_ime = document
								.querySelector(
									"a.ng-binding.person-summary__full-name_link.font-size-xxl"
								)
								.innerText.split(" ", 2)
								.toString()
								.replace(",", " ");
							OBSERVED_DIV.click();
							LOG_FIELD.innerText =
								"SCODI - FE-TA " +
								prezime_ime +
								" stated that the issue remains, dispatching for service";
							POST_BUTTON.removeAttribute("disabled");
							Dispecer(POST_BUTTON);
						});
						heroUl.appendChild(llogWrite);

						let hhesus = document.createElement("a");
						hhesus.className =
							"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
						llogWrite.appendChild(hhesus);

						let mmaria = document.createElement("span");
						mmaria.className =
							"template-chooser-dropdown-item__title ng-binding";
						mmaria.style.fontWeight = "700";
						mmaria.innerText = "DI";
						mmaria.addEventListener("click", function () {
							let prezime_ime = document
								.querySelector(
									"a.ng-binding.person-summary__full-name_link.font-size-xxl"
								)
								.innerText.split(" ", 2)
								.toString()
								.replace(",", " ");
							let ADD_A_NOTE = document.querySelector(
								".timeline-widget__add-note-input"
							);
							ADD_A_NOTE.click();
							let LOG_FIELD = document.querySelector(
								".timeline-note__text"
							);
							let POST_BUTTON = document.querySelector(
								".timeline-note__btn-container > button:nth-child(1)"
							);
							let PUBLIC_BUTTON = document.querySelector(
								"label.ng-binding > input:nth-child(1)"
							);
							PUBLIC_BUTTON.click();
							LOG_FIELD.innerText =
								"SCODI - FE-TA " +
								prezime_ime +
								" stated that the issue remains, dispatching for service";

							POST_BUTTON.removeAttribute("disabled");
						});
						hhesus.appendChild(mmaria);
					}
				}

				let OBSERVED_DIV = document.querySelector(
					"div.timeline-feed.timeline-feed__inverted.ng-scope.ng-isolate-scope>div.ng-scope.ng-isolate-scope"
				);
				OBSERVED_DIV.click();
				// let DISPLAY_NONE_ITEM = document.querySelector("div.timeline-note")
				let LOG_FIELD = document.querySelector(".timeline-note__text");
				let POST_BUTTON = document.querySelector(
					"button.small-btn_primary.ng-binding"
				);
				if (keisha == 0) {
					let prezime_ime = document
						.querySelector(
							"a.ng-binding.person-summary__full-name_link.font-size-xxl"
						)
						.innerText.split(" ", 2)
						.toString()
						.replace(",", " ");
					let ostatak;
					if (POSLOG[indexOne].registerType == "POS")
						ostatak = firstLog.substring(firstLog.indexOf("Reg"));
					else ostatak = firstLog.substring(firstLog.indexOf("SCO"));
					let foo =
						POSLOG[indexOne].registerType +
						" - FE-TA " +
						prezime_ime +
						" stated that " +
						ostatak;
					LOG_FIELD.innerText = foo;
					// console.log(foo);
					keisha++;
					let PUBLIC_BUTTON = document.querySelector(
						"label.ng-binding > input:nth-child(1)"
					);
					PUBLIC_BUTTON.click();
					POST_BUTTON.removeAttribute("disabled");
					POST_BUTTON.click();
					genericFunction();
				} else if (keisha < issueDetails.logs.length) {
					LOG_FIELD.innerText = issueDetails.logs[keisha];
					//console.log(issueDetails.logs[keisha]);
					keisha++;
					let PUBLIC_BUTTON = document.querySelector(
						"label.ng-binding > input:nth-child(1)"
					);
					PUBLIC_BUTTON.click();
					POST_BUTTON.removeAttribute("disabled");
					POST_BUTTON.click();
					genericFunction();
				}
			}
			let ii = 0;
			function Dispecer(post_button) {
				function ElementCreator() {
					heroUl.innerHTML = "";
					if (ii != 2) backButtonAndModelCreator();
					let dispatchOne = document.createElement("li");
					dispatchOne.className =
						"navigation-bar__item-menu-list ng-scope";
					dispatchOne.addEventListener("click", () => {
						if (ii == 0) OpenTask();
						else if (ii == 1) DispatchTask();
						else if (ii == 2) SrNumberFiller();
						else alert("thats enough");
					});
					heroUl.appendChild(dispatchOne);

					let DispatchOneA = document.createElement("a");
					DispatchOneA.className =
						"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
					dispatchOne.appendChild(DispatchOneA);

					let DispatchOneSpan = document.createElement("span");
					DispatchOneSpan.className =
						"template-chooser-dropdown-item__title ng-binding";
					DispatchOneSpan.style.fontWeight = "700";
					if (ii == 0) DispatchOneSpan.innerText = "Open Task";
					else if (ii == 1)
						DispatchOneSpan.innerText = "Dispatch Task";
					else if (ii == 2) DispatchOneSpan.innerText = "Take SR";
					else if (ii == 3)
						DispatchOneSpan.innerText = "Assignment Group";
					else DispatchOneSpan.innerText = "Thank you for playing <3";
					DispatchOneA.appendChild(DispatchOneSpan);
				}
				function OpenTask() {
					post_button.click();
					//ADD_A_TASK_BUTTON
					let TASK_BUTTON = document.querySelector(
						"div.profile-relation__add-relation-button:nth-child(1) > button:nth-child(1) > span:nth-child(2)"
					);
					//FROM_TEMPLATE
					let FROM_TEMPLATE = document.querySelector(
						"div.profile-relation__add-relation-button:nth-child(1) > ul:nth-child(2) > li:nth-child(2) > div:nth-child(1)"
					);
					//wait

					let GLEDAJ_MENE_BODY = document.querySelector("body");

					const pos = new MutationObserver(function () {
						let FIELD_SERVICE_DISPATCH_TOGGLE =
							document.querySelector(
								"div.ticket-template-list__item:nth-child(5) > label:nth-child(1) > input:nth-child(1)"
							);
						if (FIELD_SERVICE_DISPATCH_TOGGLE) {
							task_link.observe(GLEDAJ_MENE_BODY, {
								childList: true,
								subtree: true,
							});
							FIELD_SERVICE_DISPATCH_TOGGLE.click();
							//Done button
							document.querySelector(".btn_primary").click();
							pos.disconnect();
						}
					});
					pos.observe(GLEDAJ_MENE_BODY, {
						childList: true,
						subtree: true,
					});

					const task_link = new MutationObserver(function () {
						let SHITHEAD = document.querySelector(
							".col-xs-8 > a:nth-child(1)"
						);
						if (SHITHEAD) {
							SHITHEAD.click();
							task_link.disconnect();
						}
					});
					TASK_BUTTON.click();
					FROM_TEMPLATE.click();
					ii++;
					ElementCreator();
				}
				function DispatchTask() {
					let edit_button = document.querySelector(
						".editable-content-section__edit-button"
					);
					let observed_value = document.querySelector(
						"#ticket-record-summary"
					);
					let linkic, toggle_yes, save_button;

					const dji_dji = new MutationObserver(function () {
						toggle_yes = document.querySelector(
							".col-sm-12 > div:nth-child(1) > div:nth-child(5) > div:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(1) > label:nth-child(1) > span:nth-child(2)"
						);
						linkic = document.querySelector(
							"strong.ng-binding > a:nth-child(1)"
						);
						save_button =
							document.querySelector(".small-btn_primary");
						if (toggle_yes && save_button) {
							toggle_yes.click();
							//save button
							save_button.click();
							document
								.querySelector(".small-btn_primary")
								.click();
						} else if (linkic) {
							linkic.click();
							dji_dji.disconnect();
						}
					});

					dji_dji.observe(observed_value, {
						childList: true,
						subtree: true,
					});

					// do sledecih // radi posao vracanja na tiket
					let POSMATRANI_LOGOVI =
						document.querySelector(".timeline-feed");

					const njaa = new MutationObserver(function () {
						let kita = document.querySelector("div.feed-item");
						if (kita.innerText.includes("Work")) {
							let LINK_NAZAD_NA_TIKET = document.querySelector(
								"strong.ng-binding > a:nth-child(1)"
							);
							LINK_NAZAD_NA_TIKET.click();

							// novi
							let VELIKI_DIV = document.querySelector("body");

							let INC_COPY_PASTE_FUNC = new MutationObserver(
								function () {
									let INC_FIELD = document.querySelector(
										"div.layout-renderer__parent-row:nth-child(1) > div:nth-child(1) > div:nth-child(2) > div:nth-child(2) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > div:nth-child(1) > label:nth-child(1) > span:nth-child(2)"
									);
									if (INC_FIELD) {
										console.log("radi!");
										let FINAL_DESTINATION =
											document.createElement("li");
										FINAL_DESTINATION.className =
											"navigation-bar__item-menu-list ng-scope";
										heroUl.appendChild(FINAL_DESTINATION);

										let INC_NUMBER =
											document.createElement("input");
										INC_NUMBER.type = "text";
										INC_NUMBER.readOnly = true;
										INC_NUMBER.style.position = "apsolute";
										INC_NUMBER.style.display = "inline";
										INC_NUMBER.style.textAlign = "center";
										INC_NUMBER.addEventListener(
											"click",
											function () {
												this.select();
												document.execCommand("copy");
											}
										);
										INC_NUMBER.value = INC_FIELD.innerText;
										FINAL_DESTINATION.appendChild(
											INC_NUMBER
										);
										INC_COPY_PASTE_FUNC.disconnect();
									}
								}
							);

							INC_COPY_PASTE_FUNC.observe(VELIKI_DIV, {
								subtree: true,
								childList: true,
							});
							njaa.disconnect();
						}
					});

					njaa.observe(POSMATRANI_LOGOVI, {
						subtree: true,
						childList: true,
					});
					// //////////////////////////

					// pravi novo polje za broj tiketa

					// //////////////////////

					edit_button.click();

					ii++;
					ElementCreator();
				}

				function SrNumberFiller() {
					let SR_NUMBER = document
						.querySelector("div.feed-item:nth-child(2)")
						.innerText.substring(69, 79);

					let LOG_FIELD = document.querySelector(
						".timeline-widget__add-note-input"
					);
					LOG_FIELD.click();
					let POST_BUTTON = document.querySelector(
						"button.small-btn_primary.ng-binding"
					);
					document.querySelector(".timeline-note__text").innerText =
						SR_NUMBER;
					POST_BUTTON.removeAttribute("disabled");
					POST_BUTTON.click();

					let MAINEDIT = document.querySelector(
						"div.editable-content-section__edit-button.ng-binding.ng-scope"
					);
					MAINEDIT.click();

					let DESCRIPTION = document.querySelector(
						"#edit-summary-content-text"
					);

					DESCRIPTION.value = SR_NUMBER + " // " + DESCRIPTION.value;
				}

				ElementCreator();
			}

			if (counter == 1) {
				for (let i = 0; i < POSLOG.length; i++)
					if (text == POSLOG[i].registerType) {
						indexOne = i;
						POSLOG[i].closerLook.forEach((type) => {
							helper(type.Equipment);
							window[type.Equipment].addEventListener(
								"click",
								(e) => {
									swapper(e.target.innerText);
								}
							);
						});
						let lllogWrite = document.createElement("li");
						lllogWrite.className =
							"navigation-bar__item-menu-list ng-scope";
						lllogWrite.addEventListener("click", (e) => {
							let POOST_BUTTON = document.querySelector(
								"button.small-btn_primary.ng-binding"
							);
							POOST_BUTTON.removeAttribute("disabled");
							Dispecer(POOST_BUTTON);
						});
						heroUl.appendChild(lllogWrite);

						let hhhesus = document.createElement("a");
						hhhesus.className =
							"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
						lllogWrite.appendChild(hhhesus);

						let mmmaria = document.createElement("span");
						mmmaria.className =
							"template-chooser-dropdown-item__title ng-binding";
						mmmaria.style.fontWeight = "700";
						mmmaria.innerText = "DI";
						hhhesus.appendChild(mmmaria);
					}
			} else if (counter == 2) {
				for (let i = 0; i < POSLOG[indexOne].closerLook.length; i++)
					if (text == POSLOG[indexOne].closerLook[i].Equipment) {
						indexTwo = i;
						POSLOG[indexOne].closerLook[i].Model.forEach((type) => {
							helper(type.exactPart);
							window[type.exactPart].addEventListener(
								"click",
								(e) => {
									swapper(e.target.innerText);
								}
							);
						});
					}
			} else if (counter == 3) {
				for (
					let i = 0;
					i < POSLOG[indexOne].closerLook[indexTwo].Model.length;
					i++
				)
					if (
						text ==
						POSLOG[indexOne].closerLook[indexTwo].Model[i].exactPart
					) {
						indexThree = i;
						POSLOG[indexOne].closerLook[indexTwo].Model[
							i
						].issueDetails.forEach((type) => {
							helper(type.issue);
							window[type.issue].addEventListener(
								"click",
								(e) => {
									swapper(e.target.innerText);
								}
							);
						});
					}
			} else if (counter == 4) {
				for (
					let i = 0;
					i <
					POSLOG[indexOne].closerLook[indexTwo].Model[indexThree]
						.issueDetails.length;
					i++
				)
					if (
						text ==
						POSLOG[indexOne].closerLook[indexTwo].Model[indexThree]
							.issueDetails[i].issue
					) {
						indexFour = i;
						setKb(
							POSLOG[indexOne].closerLook[indexTwo].Model[
								indexThree
							].issueDetails[i].kb
						);
					}
			}
		}

		function backButtonAndModelCreator() {
			let tempLi = document.createElement("li");
			tempLi.className = "navigation-bar__item-menu-list ng-scope";
			heroUl.appendChild(tempLi);

			let back = document.createElement("div");
			back.addEventListener("click", () => {
				if (counter == 1) {
					counter = 0;
					x = true;
					link_element();
				} else if (counter == 2) {
					counter = 0;
					swapper(POSLOG[indexOne].registerType);
				} else if (counter == 3) {
					counter = 1;
					swapper(POSLOG[indexOne].closerLook[indexTwo].Equipment);
				} else if (counter == 4) {
					counter = 2;
					swapper(
						POSLOG[indexOne].closerLook[indexTwo].Model[indexThree]
							.exactPart
					);
				}
			});
			back.style.display = "inline";

			back.innerText = "<<<<<";
			tempLi.appendChild(back);

			let fitNetId = document.querySelector(
				"div.col-sm-8.layout-renderer__column > div.row.layout-renderer__child-row.ng-scope > div.col-sm-6.layout-renderer__child-column > div.editable-content-section-block.panel-field-area.custom-area.ng-isolate-scope.row > div.custom-field.col-md-6.full-width > div.ng-binding > div.clearfix.ng-isolate-scope > label.label_control-wrap > span.custom-field__value.ng-binding.ng-scope"
			);
			let scoId;
			let regNumRege = /^\d\d/;
			let regNum = regNumRege.test(fitNetId.innerText)
				? fitNetId.innerText.match(regNumRege)
				: "0" + fitNetId.innerText.slice(0, 1);
			let storeNumRege = /\.\d{1,4}\./;
			let storeNum = fitNetId.innerText
				.match(storeNumRege)[0]
				.slice(1, -1);
			while (storeNum.length < 4) storeNum = "0" + storeNum;
			scoId = "sc0" + regNum + "s0" + storeNum + "us";

			let scoic = document.createElement("input");
			scoic.type = "text";
			scoic.readOnly = true;
			// scoic.setAttribute('readonly', true)
			scoic.style.position = "apsolute";
			// scoic.style.minWidth = "66%";
			scoic.style.display = "inline";
			scoic.style.textAlign = "center";
			scoic.addEventListener("click", function () {
				this.select();
				document.execCommand("copy");
				window.open("http://fitnet.ncr.com/Screenshot/Home/");
			});
			scoic.value = scoId;
			tempLi.appendChild(scoic);
		}

		backButtonAndModelCreator();
		ultimateCreator(e);
	}

	let pos = document.createElement("li");
	pos.className = "navigation-bar__item-menu-list ng-scope";
	pos.addEventListener("click", (e) => {
		swapper(e.target.innerText);
	});
	heroUl.appendChild(pos);

	let posA = document.createElement("a");
	posA.className =
		"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
	pos.appendChild(posA);

	let posLogo = document.createElement("span");
	posLogo.className = "template-chooser-dropdown-item__icon-layout";
	posA.appendChild(posLogo);

	let posText = document.createElement("span");
	posText.className = "template-chooser-dropdown-item__title ng-binding";
	posText.style.fontWeight = "700";
	posText.innerText = "POS";
	posA.appendChild(posText);

	let sco = document.createElement("li");
	sco.className = "navigation-bar__item-menu-list ng-scope";
	sco.addEventListener("click", (e) => {
		swapper(e.target.innerText);
	});
	heroUl.appendChild(sco);

	let scoA = document.createElement("a");
	scoA.className =
		"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
	sco.appendChild(scoA);

	let scoLogo = document.createElement("span");
	scoLogo.className = "template-chooser-dropdown-item__icon-layout";
	scoA.appendChild(scoLogo);

	let scoText = document.createElement("span");
	scoText.className = "template-chooser-dropdown-item__title ng-binding";
	scoText.style.fontWeight = "700";
	scoText.innerText = "SCO";
	scoA.appendChild(scoText);
}

let hero = document.querySelector(".header__navigation-bar_item");
hero.innerHTML = "";

let hero2 = document.createElement("div");
hero2.className = "navigation-bar__item dropdown ng-scope";
hero.appendChild(hero2);

let heroA = document.createElement("a");
heroA.className =
	"dropdown-toggle full-screen navigation-bar__item-label ng-binding";
heroA.href = "javascript: void(0)";
//izbacivac prvog dropdowna na samom pocetku prilikom klika na
heroA.onclick = function (e) {
	hero2.classList.toggle("open");
	x = true;
	link_element();
};
// heroA.onclick = function() { alert("bl"); };
hero2.appendChild(heroA);

let logo = document.createElement("div");
logo.className = "header__logo";
heroA.appendChild(logo);

function not_all_heroes_wear_capes() {
	let ALL_BUTTONS = document.querySelectorAll("button.btn_link");
	let SHOW_MORE_BUTTONS = [];
	ALL_BUTTONS.forEach((a) => {
		if (a.innerText == "show more ") SHOW_MORE_BUTTONS.push(a);
	});
	SHOW_MORE_BUTTONS.forEach((a) => a.click());
	let ALL_LOGS = document.querySelectorAll("div.feed-item");
	let regex = /(Issue Details)((.|\n)*)(?=show less)/;
	let ISSUE_DETAILS_KOMENTAR = "";
	let MODEL_MOTHERBOARD = "";
	let regex_motherboard = /motherboardType: \w+/;
	let MODEL_BILLS = "";
	let regex_bills = /modelOfTheBillDispenser: \w+/;
	ALL_LOGS.forEach((log) => {
		if (log.innerText.includes("Issue Details")) {
			ISSUE_DETAILS_KOMENTAR = log.innerText.match(regex);
			ISSUE_DETAILS_KOMENTAR = ISSUE_DETAILS_KOMENTAR[0]
				.replace("Issue Details", "")
				.trim();
		} else if (log.innerText.includes("motherboardType:")) {
			MODEL_MOTHERBOARD = log.innerText.match(regex_motherboard);
			MODEL_MOTHERBOARD = MODEL_MOTHERBOARD[0]
				.replace("motherboardType:", "")
				.trim();
			MODEL_BILLS = log.innerText.match(regex_bills);
			MODEL_BILLS = MODEL_BILLS[0]
				.replace("modelOfTheBillDispenser:", "")
				.trim();
		}
	});
	let IMPORTANT_INFO = "";

	let DESCRIPTION_POLJE_UNCHANGED = document.querySelector(
		"div.ticket-summary__content:nth-child(2) > div:nth-child(1) > div:nth-child(2)"
	);
	function web_pos_or_ncr(text) {
		if (text.endsWith("Store Type: NCR")) IMPORTANT_INFO += " NCR";
		else if (text.endsWith("Store Type: Web-POS"))
			IMPORTANT_INFO += " Web-POS";
	}

	function model_and_dispenser(motherboard, dispenser) {
		if (motherboard == "Pocono" && dispenser == "F53SemiBunch")
			IMPORTANT_INFO = "R5 - Semi Bunch";
		else if (motherboard == "Pocono" && dispenser == "MEICashFlowBNR")
			IMPORTANT_INFO = "R5 - BNR";
		else if (motherboard == "Monaco" && dispenser == "MEICashFlowBNR")
			IMPORTANT_INFO = "R6 Lite";
		else if (motherboard == "Monaco" && dispenser == "GSR50")
			IMPORTANT_INFO = "R6Lite Plus";
		else if (motherboard == "Richmond" && dispenser == "GSR50")
			IMPORTANT_INFO = "R6L ++";
	}
	model_and_dispenser(MODEL_MOTHERBOARD, MODEL_BILLS);
	web_pos_or_ncr(DESCRIPTION_POLJE_UNCHANGED.innerText);

	let pomocnaLi = document.createElement("li");
	pomocnaLi.className = "navigation-bar__item-menu-list ng-scope";
	heroUl.appendChild(pomocnaLi);

	let pomocnaA = document.createElement("a");
	pomocnaA.className =
		"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
	pomocnaLi.appendChild(pomocnaA);

	let pomocnaSpan = document.createElement("span");
	pomocnaSpan.className = "template-chooser-dropdown-item__title ng-binding";
	pomocnaSpan.style.fontWeight = "700";
	pomocnaSpan.innerText = ISSUE_DETAILS_KOMENTAR;
	pomocnaA.appendChild(pomocnaSpan);

	let pomocnaLii = document.createElement("li");
	pomocnaLii.className = "navigation-bar__item-menu-list ng-scope";
	heroUl.appendChild(pomocnaLii);

	let pomocnaAa = document.createElement("a");
	pomocnaAa.className =
		"dropdown-item template-chooser-dropdown-item navigation-wrap__dropdown-item ng-scope";
	pomocnaLii.appendChild(pomocnaAa);

	let pomocnaSpann = document.createElement("span");
	pomocnaSpann.className = "template-chooser-dropdown-item__title ng-binding";
	pomocnaSpann.style.fontWeight = "700";
	pomocnaSpann.innerText = IMPORTANT_INFO;
	pomocnaAa.appendChild(pomocnaSpann);
}
